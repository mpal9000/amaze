{"version":3,"sources":["../../src/scrollable/index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;sBAI6B,QAAQ;;mBACrB,KAAK;;;;8BACJ,kBAAkB;;;;+BACjB,mBAAmB;;;;uCACX,4BAA4B;;;;0BACvC,YAAY;;;;uCACP,4BAA4B;;;;;;;;IAM3B,UAAU;AAGlB,WAHQ,UAAU,CAGjB,KAAK,EAAc;QAAZ,KAAK,yDAAG,EAAE;;0BAHV,UAAU;;SAC7B,IAAI,GAAG,QAAQ;;AAGb,QAAI,EAAE,IAAI,YAAY,UAAU,CAAA,AAAC,EAAE;AACjC,aAAO,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC;KAC9B;;AAED,QAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAI,CAAC,KAAK,GAAG,eAAc,EAAE,EAAE,KAAK,CAAC,CAAC;AACtC,QAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;GACtB;;eAXkB,UAAU;;WAazB,gBAAG;;;AACL,UAAM,IAAI,GAAG,0CAAc,IAAI,CAAC,KAAK,CAAC,CAAC;;AAEvC,UAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC9C,aAAO,CAAC,SAAS,GAAG,6BAAG,kBAAkB,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;;AAEjE,UAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,eAAc,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;;AAErE,UAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC/C,cAAQ,CAAC,SAAS,GAAG,2BAA2B,CAAC;;AAEjD,cAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AAC3B,aAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;;AAE9B,UAAM,IAAI,GAAG,eAAc;AACzB,cAAM,EAAE,KAAK;OACd,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC;;AAE7B,gCAAa,YAAM;AACjB,8BAAI,YAAM;AACR,gBAAK,QAAQ,GAAG,yCAAY,OAAO,EAAE,IAAI,CAAC,CAAC;AAC3C,gCAAI;mBAAM,MAAK,QAAQ,CAAC,OAAO,EAAE;WAAA,CAAC,CAAC;SACpC,CAAC,CAAC;OACJ,CAAC,CAAC;;AAEH,aAAO,OAAO,CAAC;KAChB;;;WAEK,gBAAC,IAAI,EAAE,IAAI,EAAE;;;AACjB,UAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;AAC7B,UAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;;AAE7B,UAAM,OAAO,GAAG,iCAAK,SAAS,EAAE,SAAS,CAAC,CAAC;AAC3C,UAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACpC,UAAM,OAAO,GAAG,kCAAM,QAAQ,EAAE,OAAO,CAAC,CAAC;;AAEzC,UAAI,OAAO,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE;AAClC,YAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;;AAE/C,8BAAI;iBAAM,OAAK,QAAQ,CAAC,OAAO,EAAE;SAAA,CAAC,CAAC;OACpC;KACF;;;WAEM,2BAAW;AAChB,UAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;AACxB,UAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACtB;;;SA3DkB,UAAU;;;qBAAV,UAAU","file":"index.js","sourcesContent":["/**\n * Module dependencies\n */\n\nimport { setImmediate } from 'timers';\nimport raf from 'raf';\nimport diff from 'virtual-dom/diff';\nimport patch from 'virtual-dom/patch';\nimport createElement from 'virtual-dom/create-element';\nimport cx from 'classnames';\nimport IScroll from 'iscroll/build/iscroll-lite';\n\n/**\n * Widget\n */\n\nexport default class Scrollable {\n  type = 'Widget'\n\n  constructor(vnode, props = {}) {\n    if (!(this instanceof Scrollable)) {\n      return new Scrollable(vnode);\n    }\n\n    this.vnode = vnode;\n    this.props = Object.assign({}, props);\n    this.scroller = null;\n  }\n\n  init() {\n    const elem = createElement(this.vnode);\n\n    const wrapper = document.createElement('div');\n    wrapper.className = cx('amaze-Scrollable', this.props.className);\n    // TODO: Make it better\n    if (this.props.style) Object.assign(wrapper.style, this.props.style);\n\n    const scroller = document.createElement('div');\n    scroller.className = 'amaze-Scrollable-scroller';\n\n    scroller.appendChild(elem);\n    wrapper.appendChild(scroller);\n\n    const opts = Object.assign({\n      bounce: false,\n    }, this.props.iscroll || {});\n\n    setImmediate(() => {\n      raf(() => {\n        this.scroller = new IScroll(wrapper, opts);\n        raf(() => this.scroller.refresh());\n      });\n    });\n\n    return wrapper;\n  }\n\n  update(prev, elem) {\n    const prevVnode = prev.vnode;\n    const currVnode = this.vnode;\n\n    const patches = diff(prevVnode, currVnode);\n    const rootNode = elem.childNodes[0];\n    const newNode = patch(rootNode, patches);\n\n    if (newNode !== elem.childNodes[0]) {\n      elem.replaceChild(newNode, elem.childNodes[0]);\n\n      raf(() => this.scroller.refresh());\n    }\n  }\n\n  destroy(/*elem*/) {\n    this.scroller.destroy();\n    this.scroller = null;\n  }\n}\n"]}