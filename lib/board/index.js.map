{"version":3,"sources":["../../src/board/index.js"],"names":[],"mappings":";;;;;;;;;;;;;qBAmBwB,KAAK;;oCAfJ,wBAAwB;;;;wBAC5B,UAAU;;;;6BACZ,iBAAiB;;;;uBACd,SAAS;;;;oBAEd,SAAS;;;;wBACL,aAAa;;;;uBACd,YAAY;;;;AAEhC,IAAM,OAAO,GAAG,8DAAuB,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;;;;;;AAMpC,SAAS,KAAK,CAAC,IAAI,EAAE;MAC1B,IAAI,GAAW,IAAI,CAAnB,IAAI;MAAE,IAAI,GAAK,IAAI,CAAb,IAAI;;AAElB,SAAO,qBAAG,KAAK,CAAC;AACd,YAAQ,EAAE,2BAAS,EAAE,IAAI,EAAJ,IAAI,EAAE,IAAI,EAAJ,IAAI,EAAE,CAAC;GACnC,CAAC,CAAC;CACJ;;;;;;AAMD,IAAM,SAAS,GAAG,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,eAAe,EAAE,SAAS,EAAK;AACtF,SAAO,EAAE,OAAO,EAAP,OAAO,EAAE,MAAM,EAAN,MAAM,EAAE,KAAK,EAAL,KAAK,EAAE,IAAI,EAAJ,IAAI,EAAE,eAAe,EAAf,eAAe,EAAE,SAAS,EAAT,SAAS,EAAE,CAAC;CACrE,CAAC,CAAC;;AAEH,IAAM,aAAa,GAAG,OAAO,CAAC,UAAC,WAAW,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,cAAc,EAAE,SAAS,EAAE,OAAO,EAAK;AAChI,SAAO;AACL,eAAW,EAAX,WAAW,EAAE,OAAO,EAAP,OAAO,EAAE,SAAS,EAAT,SAAS,EAAE,OAAO,EAAP,OAAO,EAAE,OAAO,EAAP,OAAO,EAAE,OAAO,EAAP,OAAO;AAC1D,kBAAc,EAAd,cAAc,EAAE,SAAS,EAAT,SAAS,EAAE,OAAO,EAAP,OAAO;GACnC,CAAC;CACH,CAAC,CAAC;;AAEH,IAAM,YAAY,GAAG,OAAO,CAAC,UAAC,IAAI,EAAE,OAAO,EAAK;AAC9C,SAAO,EAAE,IAAI,EAAJ,IAAI,EAAE,OAAO,EAAP,OAAO,EAAE,CAAC;CAC1B,CAAC,CAAC;;AAEH,KAAK,CAAC,MAAM,GAAG,SAAS,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE;MACnC,QAAQ,GAAK,KAAK,CAAlB,QAAQ;;AAEhB,SAAO,gBACL,qBAAqB,EACrB,CACE,qBAAG,OAAO,CAAC,aAAa,EAAE,KAAK,CAAC,EAEhC,qBAAG,OAAO,CAAC,sBAAS,MAAM,EAAE,QAAQ,EAAE,aAAa,qCAC9C,gCAAO,CACR,aAAa,EAAE,SAAS,EAAE,WAAW,EACrC,SAAS,EAAE,SAAS,EAAE,SAAS,EAC/B,gBAAgB,EAAE,WAAW,EAAE,SAAS,CACzC,EAAE,KAAK,CAAC,EACV,CAAC,CACH,CACF,CAAC;CACH,CAAA;;;;;;AAMD,SAAS,aAAa,CAAC,KAAK,EAAE;AAC5B,SAAO,gBAAE,sBAAsB,EAAE,CAC/B,qBAAG,OAAO,CAAC,kBAAK,MAAM,EAAE,SAAS,qCAC5B,gCAAO,CACR,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,iBAAiB,EAAE,WAAW,CACrE,EAAE,KAAK,CAAC,EACV,CAAC,EAEF,KAAK,CAAC,OAAO,IAAI,qBAAG,OAAO,CAAC,qBAAQ,MAAM,EAAE,YAAY,CACtD,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,OAAO,CAC1B,CAAC,CACH,CAAC,CAAC;CACJ","file":"index.js","sourcesContent":["/**\n * Module dependencies\n */\n\nimport partialRight from 'ramda/src/partialRight';\nimport _memoize from 'memoizee';\nimport _props from 'ramda/src/props';\nimport hg, { h } from 'mercury';\n\nimport Grid from '../grid';\nimport Controls from '../controls';\nimport Results from '../results';\n\nconst memoize = partialRight(_memoize, { max: 1 });\n\n/**\n * Component\n */\n\nexport default function Board(opts) {\n  const { undo, redo } = opts;\n\n  return hg.state({\n    controls: Controls({ undo, redo }),\n  });\n}\n\n/**\n * Render component.\n */\n\nconst gridProps = memoize((columns, margin, cells, bots, checkReadyState, isStarted) => {\n  return { columns, margin, cells, bots, checkReadyState, isStarted };\n});\n\nconst controlsProps = memoize((botIdentity, isReady, isRunning, onStart, onPause, onReset, addBotRandomly, isStarted, winners) => {\n  return {\n    botIdentity, isReady, isRunning, onStart, onPause, onReset,\n    addBotRandomly, isStarted, winners,\n  };\n});\n\nconst resultsProps = memoize((bots, winners) => {\n  return { bots, winners };\n});\n\nBoard.render = function render(state, props) {\n  const { controls } = state;\n\n  return h(\n    'section.amaze-Board',\n    [\n      hg.partial(renderContent, props),\n\n      hg.partial(Controls.render, controls, controlsProps(\n        ..._props([\n          'botIdentity', 'isReady', 'isRunning',\n          'onStart', 'onPause', 'onReset',\n          'addBotRandomly', 'isStarted', 'winners',\n        ], props)\n      )),\n    ]\n  );\n}\n\n/**\n *\n */\n\nfunction renderContent(props) {\n  return h('.amaze-Board-content', [\n    hg.partial(Grid.render, gridProps(\n      ..._props([\n        'columns', 'margin', 'cells', 'bots', 'checkReadyState', 'isStarted',\n      ], props)\n    )),\n\n    props.winners && hg.partial(Results.render, resultsProps(\n      props.bots, props.winners\n    )),\n  ]);\n}\n"]}